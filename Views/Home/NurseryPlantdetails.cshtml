@model FMDSS.Models.Home.ProductListVM
@using CaptchaMvc.HtmlHelpers
@{
    ViewBag.Title = "NurseryPlantdetails";
    Layout = null;

}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Forest Nurseries</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href="~/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="~/css/mobile.css" rel="stylesheet">
    <link href="~/css/main.css" rel="stylesheet">
    <link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

    <style>
        .header-top ul li a {
            color: #333;
            font-size: 12px;
            font-weight: bolder;
        }

        #noticeDiv {
            position: absolute;
            top: 150px;
            background: rgba(0,0,0,0.5);
            width: 25%;
            height: 37%;
            left: 14px;
            padding: 12px;
            border-radius: 8px;
            overflow: hidden;
        }

        #modalWorkFlowDetails .tbl-scroll {
            overflow-y: auto;
            max-height: 600px !important;
        }

        #modalWorkFlowDetails .modal-dialog {
            width: 720px !important
        }

        #modalWorkFlowDetails .scroll {
            overflow-y: auto;
            max-height: 350px !important;
        }

        #modalWorkFlowDetails .panel-body .form-group {
            margin-bottom: 10px;
        }

        #myModal .modal-header {
            background-color: #5cb85c;
        }

            #myModal .modal-header h4, .close {
                color: #ffffff;
                text-align: center;
                font-size: 30px;
            }

        #myModal .modal-footer {
            background-color: #f9f9f9;
        }

        #myModal .btn-success {
            width: 100%;
            padding: 10px;
        }

        ul.a {
            list-style-type: circle;
        }

        /*Loader css*/
        .loaderDiv {
            position: fixed;
            top: 0px;
            left: 0px;
            height: 100%;
            width: 100%;
            background-color: rgb(173, 164, 164);
            z-index: 100;
            opacity: 0.6;
            display: none;
        }

        .loader {
            position: relative;
            margin: 200px auto;
            width: 100px;
            z-index: 1000;
        }

            .loader:before {
                content: '';
                display: block;
                padding-top: 100%;
            }

        .circular {
            -webkit-animation: rotate 2s linear infinite;
            animation: rotate 2s linear infinite;
            height: 100%;
            -webkit-transform-origin: center center;
            -ms-transform-origin: center center;
            transform-origin: center center;
            width: 100%;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            margin: auto;
        }

        .path {
            stroke-dasharray: 1, 200;
            stroke-dashoffset: 0;
            -webkit-animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
            animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
            stroke-linecap: round;
        }

        .anchor{
            color:#0058ff;
        }
        .anchor:hover{
            color:#009eff;
            text-decoration:underline;
        }


        @@-webkit-keyframes rotate {
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        @@keyframes rotate {
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        @@-webkit-keyframes dash {
            0% {
                stroke-dasharray: 1, 200;
                stroke-dashoffset: 0;
            }

            50% {
                stroke-dasharray: 89, 200;
                stroke-dashoffset: -35;
            }

            100% {
                stroke-dasharray: 89, 200;
                stroke-dashoffset: -124;
            }
        }

        @@keyframes dash {
            0% {
                stroke-dasharray: 1, 200;
                stroke-dashoffset: 0;
            }

            50% {
                stroke-dasharray: 89, 200;
                stroke-dashoffset: -35;
            }

            100% {
                stroke-dasharray: 89, 200;
                stroke-dashoffset: -124;
            }
        }

        @@-webkit-keyframes color {
            100%, 0% {
                stroke: #d62d20;
            }

            40% {
                stroke: #0057e7;
            }

            66% {
                stroke: #008744;
            }

            80%, 90% {
                stroke: #ffa700;
            }
        }

        @@keyframes color {
            100%, 0% {
                stroke: #d62d20;
            }

            40% {
                stroke: #0057e7;
            }

            66% {
                stroke: #008744;
            }

            80%, 90% {
                stroke: #ffa700;
            }
        }
    </style>
</head>
<body>
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
            <input type="hidden" id="BookingPopUpStatus" value="@ViewData["PopUpContentStatus"]" />
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header" style="padding:35px 50px;">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4><i class="fa-fw"></i>@ViewData["Title"]</h4>
                </div>
                <div class="modal-body" style="padding:40px 50px;">
                    @if (ViewData["PopUpContent"] != null)
                    {
                        @Html.Raw(ViewData["PopUpContent"])
                    }

                </div>
                <div class="modal-footer">

                </div>
            </div>

        </div>
    </div>
    <div class="modal fade" id="requestModal" role="dialog">
        <div class="modal-dialog modal-sm">
            <input type="hidden" id="BookingPopUpStatus" value="@ViewData["PopUpContentStatus"]" />
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header" style="color:#808080 !important">
                    <button type="button" id="btnClose" class="close" data-dismiss="modal">&times;</button>
                    <h4>Check Your Booking Id</h4>
                </div>
                @using (Html.BeginForm("Home", "Home", FormMethod.Post))
            {
                    <div class="modal-body">
                        <div id="popUpStatus">
                            @if (TempData["ErrorMessage"] != null)
                            {
                                @Html.Raw(TempData["ErrorMessage"]);
                            }
                        </div>
                        <div class="clearfix"></div>
                        <div class="form-group col-md-12" style="margin-bottom:0px;">
                            <label>Enter Booking Id: </label>
                            <input type="text" id="txtRequestId" name="requestId" class="form-control" />
                            <input type="hidden" id="ErrorVal" value="@TempData["ErrorVal"]" />

                        </div>
                        <div class="form-group col-md-12">
                            <div class="capt">
                                @Html.MathCaptcha()
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <input type="submit" id="btnSubmit1" value="Check" class="btn btn-success" />
                        </div>

                        <div class="clearfix"></div>

                    </div>
                }
            </div>

        </div>
    </div>
    @Html.Hidden("hdnRootURL", Url.Content("~/"))
    <!---Fra Modal Popup-->
    <div class="modal fade in" data-backdrop="static" id="modalFRA" tabindex="1" role="dialog" aria-hidden="false">
        <div class="modal-dialog" style="width:90%;">
            <div class="modal-content">
                <div class="panel panel-default">
                    <div class="panel-heading" style="font-size:14px;font-weight:700;">
                        Request Details
                    </div>
                    <div class="panel-body">
                        <div id="divFRAreport">
                        </div>

                    </div>
                    <div class="modal-footer" id="fot-f">
                        <div id="btn" class="col-lg-12">
                            <button id="btnCancelSD" name="button" class="btn btn-danger" type="button" value="Cancel" data-dismiss="modal" style="width: auto">
                                <i class="fa fa-times fa-fw"></i> Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade in" data-backdrop="static" id="modalData" tabindex="-1" role="dialog" aria-hidden="false"></div>
    <div class="modal fade in" data-backdrop="static" id="modalWorkFlowDetails" tabindex="1" role="dialog" aria-hidden="false"></div>
    <div class="modal fade in" data-backdrop="static" id="modalAEvidence" tabindex="2" role="dialog" aria-hidden="false"></div>


    <!-- NAVBAR
    ================================================== -->

    <div class="loaderDiv">
        <div class="loader">
            <svg class="circular" viewBox="25 25 50 50">
                <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
            </svg>
        </div>
    </div>

    <div class="headerfirst">

        <!--Top Bar-->
        <div class="header-top">
            <div class="container" id="con">
                <div class="row">
                    <div class="text-right">
                        <ul class="links list-inline">
                            <li><a href="~/Help/User_Manual_Online20_Ticket_Booking_20-12-2018.pdf" target="_blank"> Help Doc for online booking </a></li>
                            <li><a href="~/Help/Help_document.pdf" target="_blank"> Help Doc for FMDSS</a></li>
                            <li><img src="~/images/sign_in.png" alt="SSO Sign in"><a href="https://sso.rajasthan.gov.in/signin?ru=fmdss">SSO Login</a></li>


                            <li>
                                <img src="~/images/flags/flag_default.png" alt="English"> <a href="">English</a> &nbsp;
                                <!-- <img src="~/images/flags/flag_india.png" alt="Hindi"> <a href="">Hindi</a>-->
                            </li>  |
                            <li><a href="#" id="incfont">A+</a>&nbsp;&nbsp;<a href="#" id="decfont">A-</a></li>
                            <li><a href="#" class="box-green" id="GreenCss">A</a></li>
                            <li><a href="#" class="box-white" id="RevertCss">A</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!--/.End of Top Bar-->

        <div class="navbar navbar-default" role="navigation" data-spy="affix" data-offset-top="400" id="nav">
            <div class="container">
                <div class="navbar-header">
                    <a href="javascript:void(0);">
                        <img src="~/images/unnamed.png" alt="Logo" title="150 Years of celebrating the mahatma" style="height:80px; width:100px;">
                    </a>

                    <a class="navbar-brand scroll" href="https://fmdss.forest.rajasthan.gov.in/" id="myLogo">
                        <img src="~/images/logo.png" alt="Logo" title="Logo" class="img-responsivebrand">
                    </a>
                </div>

                <div class="collapse navbar-collapse" id="navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li>
                            @Html.ActionLink("Forest Nurseries", "Nurserydetails", "Home")
                        </li>
                        <li class="dropdown">
                            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Wildlife Information<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="home/InventoryReport" target="_blank"><i style="font-size:20px"> </i>  Inventory Report</a></li>
                                <li><a href="home/Failedtransaction" target="_blank"><i style="font-size:20px"> </i>  Failed transaction</a></li>

                            </ul>
                        </li>


                        @*<li class="dropdown">
                    <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Mobile App <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="https://play.google.com/store/apps/details?id=gov.fmdssbooking" target="_blank"><i class="fa fa-android" style="font-size:20px"> </i> Wildlife Booking(Android)</a></li>
                        <li><a href="https://itunes.apple.com/in/app/fmdss-wb/id1449570571?mt=8" target="_blank"><i class="fa fa-apple" style="font-size:20px"> </i>Wildlife Booking(Iphone)</a></li>
                        <li><a href="http://10.68.128.179/apk/Fmdss(G2G).apk" target="_blank"><i class="fa fa-android" style="font-size:20px"> </i>  FMDSS Android APK (G2G)</a></li>
                    </ul>
                </li>*@

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">
                                <span class="nav-label">Mobile App </span>
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="nav-label">Citizen</span></a>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <a href="https://play.google.com/store/apps/details?id=gov.fmdssbooking" target="_blank" rel="noopener noreferrer">
                                                <i class="fa fa-apple" aria-hidden="true"></i>
                                                Wildlife Booking(Android)
                                            </a>
                                        </li>
                                        <li>
                                            <a href="https://itunes.apple.com/in/app/fmdss-wb/id1449570571?mt=8" target="_blank" rel="noopener noreferrer">
                                                <i class="fa fa-android" aria-hidden="true"></i>
                                                Wildlife Booking(Iphone)
                                            </a>
                                        </li>

                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="nav-label">Department</span></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="http://10.68.128.179/apk/Fmdss(G2G).apk"><i class="fa fa-android" style="font-size:20px"> </i>   FMDSS Android APK (G2G)</a></li>

                                    </ul>
                                </li>

                            </ul>
                        </li>



                        <li>
                            @*<button type="button" class="IssueBoards btn btn-success UpdateForNotArrived" data-toggle="modal" data-target="#myModal" id="NotArrivedindex_@item.Index" name="NotArrivedindex_@item.Index">No Show</button>*@
                            <a href="javascript:void(0)" id="a_request" data-toggle="modal" data-target="#requestModal">Validate Ticket</a>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">About Us <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/forest-department/en/about-us/mandate.html" target="_blank" rel="noopener noreferrer">Mandate </a></li>
                                <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/en/raj-wild-life/about-us/organizational-structure.html" target="_blank" rel="noopener noreferrer">Organizational Structure</a></li>
                                <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/en/raj-wild-life/about-us/structure-at-the-division-level.html" target="_blank" rel="noopener noreferrer">Structure at the Divisional Level</a></li>
                                <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/en/raj-wild-life/about-us/administrative-strength.html" target="_blank" rel="noopener noreferrer">Administrative Strength</a></li>
                                <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/en/raj-wild-life/public-information/orders---circulars.html" target="_blank" rel="noopener noreferrer">Orders,Circulars & IPR of ROs</a></li>
                            </ul>
                        </li>
                        <!--/.end-->
                        <!--Help doc-->
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Help Documents <b class="caret"></b></a>
                            <ul class="dropdown-menu width-control">
                                <li><a href="~/Help/User_Manual_Online20_Ticket_Booking_20-12-2018.pdf" target="_blank">Help Document for online booking</a></li>
                                <li><a href="/Help/Help_document.pdf" target="_blank">Help Document for FMDSS</a></li>
                                <li><a href="~/help/Nursery_User manual_30_05_20.pdf" target="_blank">Nursery User Manual(English) </a></li>
                                <li><a href="~/help/Nursery_Hindi.pdf" target="_blank">Nursery User Manual(Hindi) </a></li>

                            </ul>
                        </li>


                    </ul>
                </div>
                <!-- /.navbar-collapse -->


            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="dataTable_wrapper">
                            <div class="row">
                                <div class="col-xs-12 table-responsive" id="tblProductList">
                                    <div class="col-lg-12">
                                        <h4>Plant Details:</h4>
                                    </div>
                                    <table class="table table-striped table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th>S.NO.</th>
                                                <th>District Name</th>
                                                <th>Nursery Name</th>
                                                <th>Product Name</th>
                                                <th>Total Available QTY</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbdyItemDetails">
                                            @{ var RNo = 0;}
                                            @if (Model.districtWiseNurseryProductList != null)
                                            {
                                                foreach (var item in Model.districtWiseNurseryProductList)
                                                {
                                                    RNo = RNo + 1;
                                                    <tr>
                                                        <td>@RNo</td>
                                                        <td>@item.DistName</td>
                                                        <td>@item.NurseryName</td>
                                                        <td><a href="#" onclick="ShowProductDetail ('@item.ProductNamesID','@item.DistCode','@item.NurseryCode');" class="anchor">@item.ProductName</a></td>
                                                        <td>@item.Citizen_RemainingQTY</td>
                                                    </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="modal fade" id="ViewMediaModal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel">Plant Details Height Wise:</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true" style="color:#000000">×</span>
                    </button>
                </div>
                <div class="modal-body" id="ModalData">

                </div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    @Html.Partial("_PartialFooterHome")
    <!-- Notice -->
    <div class="modal fade in" id="diologNotice" tabindex="-1" role="dialog" aria-hidden="false">
        <div class="modal-dialog mdw">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>

                    <h4 class="modal-title" id="myModalLabel"><label id="lbpl_header"> </label></h4>
                </div>

                <div class="modal-body">
                    <!-- From URL Get -->
                    <input type="hidden" id="pHdn_No" name="PHdn_No" />
                    <div id="divPublish"></div>

                    <!-- /. From URL Get -->
                </div>
                <!-- /.modal-body -->
                <div class="modal-footer" id="fot-f">
                    <div id="btn" class="col-lg-12">
                        <button onclick="PrintData('divPublish')" name="button" class="btn btn-info" type="button" value="Cancel" data-dismiss="modal" style="width: auto">
                            <i class="fa fa-print"></i> Print
                        </button>
                        <button name="button" class="btn btn-danger" type="submit" value="Cancel" data-dismiss="modal" style="width: auto">
                            <i class="fa fa-times fa-fw"></i> Close
                        </button>
                    </div>

                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <!-- Placed at the end of the document so the pages load faster -->

    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        //$.noConflict(true);
        var $ = $.noConflict();
    </script>

    <script src="~/Scripts/jquery-ui.js"></script>
    @*<script src="~/Scripts/jquery-ui.js"></script>*@
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/ready.js" type="text/javascript"></script>
    <script src="~/js/Common.js"></script><!-- Notice -->
    <script src="~/Scripts/Controller/Common.js"></script>
    @*<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />*@
    @*<script src="~/js/bootstrap.min.js"></script>*@
    @*<script src="~/js/dashboard/dashboard.js" type="text/javascript"></script>
        <script src="~/js/dashboard/sidebar.js" type="text/javascript"></script>*@
    <link href="~/css/dashboard/dataTables.bootstrap.css" rel="stylesheet" />
    <script src="~/js/dashboard/jquery.dataTables.min.js"></script>
    <script src="~/js/dashboard/dataTables.bootstrap.min.js"></script>
    @*<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>*@




    <script>

        function ShowProductDetail(ProductNamesID, DistCode, NurseryCode) {
            $(".loaderDiv").show();
            $("#ModalData").html("");
            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetNurseryProductDetails", "Home")',
            dataType: 'json',
                            data: { 'DIST_CODE': DistCode, 'NURSERY_CODE': NurseryCode, 'Id': ProductNamesID },
                            success: function (productTypeInformationList) {
                debugger;
                //$("#ModalData").html("");
                                var mdata = '<h4>' + productTypeInformationList[0].ProductName+'</h4>';
                 mdata += '<table class="table table-striped table-bordered table-hover"><thead><tr><th>S.No.</th><th>Plant Height</th><th>Available Quantity</th><th>Price Per Unit (INR)</th></tr></thead>';
                                var RNo = 0;
                                $.each(productTypeInformationList, function (i, v) {
                                    RNo = RNo + 1;
                                    mdata += '<tbody><tr><td>' + RNo + '</td><td>' + v.ProductBaseTypeName + '</td><td>' + v.Citizen_RemainingQTY + '</td><td>' + v.Price+'</td></tr></tbody>';
                });

                                $(".loaderDiv").hide();
                                $("#ModalData").html(mdata);
                                $("#ViewMediaModal").modal();
            },
            error: function (ex) {
                alert('Failed to retrieve states.' + ex);
            }
        });
                    }
   function hideFra(div) {
            $('#'+div).modal('hide');
        }


        ////Fra Details

        function loadFraDetails() {
             var RootUrlLayout = '@Url.Content("~/")';

            $.ajax({
                type: 'GET',
                url: RootUrlLayout + "Home/GetFraReport",
                dataType: 'html',
                beforeSend: function () {
                    $.blockUI({ message: 'Please Wait...' });
                },
                complete: function () {
                    $.unblockUI();
                },
                success: function (data) {
                    try {
                        if (data.trim() != "") {
                            console.log(data);
                            $('#divFRAreport').html(data);
                            //$('#lnkGetFRAWorkflow').trigger("click");
                        }
                        else {
                            alert("Invalid request number!");
                        }
                    }
                    catch (err) { $('#modalWorkFlowDetails').html('');}
                },
                error: function (ex) {
                    console.log(ex.error);
                }
            });
    }
    function PostPublishNotice(noticeId) {
            $("#lbpl_header").text('Publish Notice');
            var RootUrlLayout = '@Url.Content("~/")';
            var tblinfo = {
                NoticeId: $.trim(noticeId)
            }

            $.ajax({
                type: 'POST',
                url: RootUrlLayout + 'Home/PublishNotice',
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(tblinfo),
                success: function (data) {
                    $("#divPublish").html(data.list1);
                    $("#Amendments").html(data.list2);
                },
                error: function (ex) {
                    alert('Failed to retrieve states.' + ex);
                }
            });
        }

        $(document).ready(function () {
            if ($("#popUpStatus").find("div").text() != null && $("#popUpStatus").find("div").text() != '' && $("#popUpStatus").find("div").text() != 'undefined')
            {
                $("#requestModal").modal('show');
            }

            //$("#popUpStatus").find("div").text();

        });

    </script>


    <script src="~/Scripts/jquery.blockUI.js"></script>

</body>
</html>
