@model FMDSS.Models.MIS.MISCommonModel
@{
    ViewBag.Title = "Remaining Details";

    Layout = null;

}
@using CaptchaMvc.HtmlHelpers
@*<meta http-equiv="refresh" content="20;url=http://10.68.128.179/home/InventoryReport">*@
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link href="~/css/bootstrap.min.css" rel="stylesheet">
<!-- Custom styles for this template -->
<link href="~/css/mobile.css" rel="stylesheet">
<link href="~/css/main.css" rel="stylesheet">
<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script>
    function message() {

        var PlaceName = $("#Place option:selected").text();
        var ShiftName = $("#SHIFT_TYPE option:selected").text();
        return confirm('Your request for ' + PlaceName + ' place & shift ' + ShiftName  +' is being registered for 10 Minutes, you can re-apply for different place & shift after 10 minutes !!!!.');
    }
</script>



<style>
    #tbl {
        overflow-x: auto;
        overflow-y: auto;
        padding: 15px;
        width: 100%;
        height: 400px;
    }

    .header-top ul li a {
        color: #333;
        font-size: 12px;
        font-weight: bolder;
    }

    #noticeDiv {
        position: absolute;
        top: 150px;
        background: rgba(0,0,0,0.5);
        width: 25%;
        height: 37%;
        left: 14px;
        padding: 12px;
        border-radius: 8px;
        overflow: hidden;
    }

    #modalWorkFlowDetails .tbl-scroll {
        overflow-y: auto;
        max-height: 600px !important;
    }

    #modalWorkFlowDetails .modal-dialog {
        width: 1092px !important
    }

    #modalWorkFlowDetails .scroll {
        overflow-y: auto;
        max-height: 350px !important;
    }

    #modalWorkFlowDetails .panel-body .form-group {
        margin-bottom: 10px;
    }

    .page-header {
        float: left;
        font-size: 19px;
        background: #737373;
        color: #fff;
        font-weight: normal;
        width: 100%;
        padding: 5px;
        box-sizing: border-box;
        border-radius: 3px;
    }

    .inventry_tbl tr th, .inventry_tbl tr td {
        font-size: 14px;
        vertical-align: top;
    }

    .inventry_tbl tr th {
        font-weight: 600;
        background: #737373;
        color: #fff
    }
</style>



<div class="headerfirst">

    <!--Top Bar-->
    <div class="header-top">
        <div class="container" id="con">
            <div class="row">
                <div class="text-right">
                    <ul class="links list-inline">
                        <li><a href="~/Help/User_Manual_Online20_Ticket_Booking_20-12-2018.pdf" target="_blank"> Help Doc for online booking </a></li>
                        <li><a href="~/Help/Help_document.pdf" target="_blank"> Help Doc for FMDSS</a></li>
                        <li><img src="~/images/sign_in.png" alt="SSO Sign in"><a href="https://sso.rajasthan.gov.in/signin?ru=fmdss">SSO Login</a></li>


                        <li>
                            <img src="~/images/flags/flag_default.png" alt="English"> <a href="">English</a> &nbsp;
                            <!-- <img src="~/images/flags/flag_india.png" alt="Hindi"> <a href="">Hindi</a>-->
                        </li>  |
                        <li><a href="#" id="incfont">A+</a>&nbsp;&nbsp;<a href="#" id="decfont">A-</a></li>
                        <li><a href="#" class="box-green" id="GreenCss">A</a></li>
                        <li><a href="#" class="box-white" id="RevertCss">A</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!--/.End of Top Bar-->

    <div class="navbar navbar-default" role="navigation" data-spy="affix" data-offset-top="400" id="nav">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse" onclick="togglenav();">
                    <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                </button>
                <a class="navbar-brand scroll" href="http://fmdss.forest.rajasthan.gov.in/" id="myLogo">
                    <img src="~/images/logo.png" alt="Logo" title="Logo" class="img-responsivebrand">
                </a>
            </div>

            <div class="collapse navbar-collapse" id="navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        @Html.ActionLink("Check Inventory for Wildlife Booking", "InventoryReport", "Home")
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Mobile App <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="https://play.google.com/store/apps/details?id=gov.fmdssbooking" target="_blank"><i class="fa fa-android" style="font-size:20px"> </i>  Android</a></li>
                            <li><a href="https://itunes.apple.com/in/app/fmdss-wb/id1449570571?mt=8" target="_blank"><i class="fa fa-apple" style="font-size:20px"> </i>  Iphone</a></li>

                        </ul>
                    </li>


                    <li>
                        <a href="javascript:void(0)" id="a_request" data-toggle="modal" data-target="#requestModal">Validate Ticket</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About Us <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/forest-department/en/about-us/mandate.html" target="_blank">Mandate </a></li>
                            <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/en/raj-wild-life/about-us/organizational-structure.html">Organizational Structure</a></li>
                            <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/en/raj-wild-life/about-us/structure-at-the-division-level.html">Structure at the Divisional Level</a></li>
                            <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/en/raj-wild-life/about-us/administrative-strength.html">Administrative Strength</a></li>
                            <li><a href="http://forest.rajasthan.gov.in/content/raj/forest/en/raj-wild-life/public-information/orders---circulars.html">Orders,Circulars & IPR of ROs</a></li>
                        </ul>
                    </li>
                    <!--/.end-->
                    <!--Help doc-->
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Help Documents <b class="caret"></b></a>
                        <ul class="dropdown-menu width-control">
                            <li><a href="~/Help/User_Manual_Online20_Ticket_Booking_20-12-2018.pdf" target="_blank">Help Document for online booking</a></li>
                            <li><a href="/Help/Help_document.pdf" target="_blank">Help Document for FMDSS</a></li>
                        </ul>
                    </li>


                </ul>
            </div>
            <!-- /.navbar-collapse -->


        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12">
            <h1 class="page-header"><span>Inventory Report</span></h1>
        </div>
        <label><b> Note : </b></label>
        <div class="col-xs-12">
            <span>* The available inventory displayed are as per the number of vehicles revised to 140 by the CWLW office on 08-10-2019. </span>
        </div>

        <div class="col-xs-12">
            <span>The Inventory of the cancelled tickets are automatically added to the inventory after 24 hours of the cancellation and is reflected at 10:00 AM of next day. If the cancellation made for the next day visit then the inventory will be updated immediately. </span>
        </div>
        @using (Html.BeginForm("InventoryReport", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()
            <div class="col-xs-12">
                <div class="panel panel-default">
                    <div class="panel-body">


                        <div class="col-md-4 col-sm-6 col-xs-12">
                            <div class="form-group">
                                <label>Date:<span class="mandatory">*</span></label>
                                @Html.TextBoxFor(model => model.FromDate, new { @class = "form-control common ", id = "FromDate", autocomplete = "off" })
                                <span id="errFromDate" style="display: none" class="alert-danger1">Date is Required.</span>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 col-xs-12">
                            <div class="form-group">
                                <label>Place:<span class="mandatory">*</span></label>
                                @Html.DropDownListFor(model => model.Place, (IEnumerable<SelectListItem>)ViewBag.ddlPlace1, "--Select--", new { @class = "form-control common", id = "Place" })
                                <div id="errPlace" style="display:none" class="alert-danger1">Place is Required.</div>

                            </div>
                        </div>

                        <div class="col-md-4 col-sm-6 col-xs-12">
                            <div class="form-group">
                                <label>Shift Type:<span class="mandatory">*</span></label>
                                @Html.DropDownListFor(model => model.SHIFT_TYPE, (IEnumerable<SelectListItem>)ViewBag.ddlShiftTypeRemaingSeats, "--Select--", new { @class = "form-control common", id = "SHIFT_TYPE" })
                                <div id="errSHIFT_TYPE" style="display:none" class="alert-danger1">Shift Type is Required.</div>

                            </div>
                        </div>
                        <div id="btn" class="col-lg-12">

                            <div class="col-lg-12 un-bold" style="clear:both">
                                <div class="capt">
                                    <p>   @Html.MathCaptcha()  <span style="color:red">@TempData["ErrorMessage"]</span> <br /></p>



                                </div>
                            </div>


                            <button type="submit" class="btn btn-success" name="Command" value="Save" id="btn_submit1" >
                                <i class="fa fa-check"></i> Submit
                            </button>

                            <a href="https://sso.rajasthan.gov.in/signin?ru=fmdss" class="btn btn-success" name="booknow">Book Now</a>

                            <button type="button" class="btn btn-warning" id="btn_reset">
                                <i class="fa fa-circle-o-notch fa-fw"></i> Reset
                            </button>
                        </div>

                    </div>
                </div>


                <br />


                <div class="dataTable_wrapper">
                    <div class="row">
                        <div class="col-xs-12 table-responsive">

                            <table class="table table-striped table-bordered table-hover inventry_tbl">

                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Place Name</th>
                                        <th>Zone </th>
                                        <th>Vehicle Name </th>
                                        <th>Advance Quota </th>
                                        <th>Current Quota</th>
                                        <th>Total Quota </th>
                                        <th>Total Booked Seat </th>
                                        @*<th >Available (Advance) </th>

                                            <th >Total Seat (Remaining) </th>*@
                                        <th>Request in queue </th>
                                        <th>Upcoming seats out of cancellation </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in (IEnumerable<FMDSS.Models.MIS.ViewTicketRemaningDT1>)TempData["ListCurrentBookingRemainingDetails"])
                                    {

                                        <tr>
                                            <td>@Html.DisplayFor(model => item.Index)</td>
                                            <td>@Html.DisplayFor(model => item.PlaceName)</td>
                                            <td>@Html.DisplayFor(model => item.ZoneName)</td>
                                            <td>@Html.DisplayFor(model => item.VehicleName)</td>
                                            <td>@Html.DisplayFor(model => item.seatsForCitizen)</td>
                                            <td>@Html.DisplayFor(model => item.CurrentBookingSeat)  </td>
                                            <td>@Html.DisplayFor(model => item.TotalSeats)</td>
                                            <td>@Html.DisplayFor(model => item.TotalBookedSeat)</td>
                                            @*<td>
                                                    @if (item.CitizenRemainingSeat <= 0)
                                                    {
                                                        <p>NA</p>
                                                    }
                                                    else
                                                    {
                                                        @Html.DisplayFor(model => item.CitizenRemainingSeat)
                                                    }
                                                </td>

                                                <td>

                                                    @if (item.RemainingSeat <= 0)
                                                    {
                                                        <p>NA</p>
                                                    }
                                                    else
                                                    {
                                                        @Html.DisplayFor(model => item.RemainingSeat)
                                                    }
                                                </td>*@

                                            <td>@Html.DisplayFor(model => item.UnderProcess)</td>
                                            <td>

                                                @Html.DisplayFor(model => item.UpComming)


                                            </td>

                                        </tr>

                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        }

        @Html.Partial("_PartialFooterHome")


        @*<script src="~/Scripts/jquery.blockUI.js"></script>*@
        @*<script>

                $(document).ajaxStart($.blockUI).ajaxStop($.unblockUI);
            </script>*@


        <script src="~/Scripts/jquery-1.10.2.js"></script>
        <script type="text/javascript">
            //$.noConflict(true);
            var $ = $.noConflict();
        </script>
        <script src="~/Scripts/jquery-ui.js"></script>
        @*<script src="~/Scripts/jquery-ui.js"></script>*@
        <script src="~/js/bootstrap.min.js"></script>
        @*<script src="~/js/Common.js"></script>*@
        @*<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />*@
        @*<script src="~/js/bootstrap.min.js"></script>*@
        @*<script src="~/js/dashboard/dashboard.js" type="text/javascript"></script>
            <script src="~/js/dashboard/sidebar.js" type="text/javascript"></script>*@
        <link href="~/css/dashboard/dataTables.bootstrap.css" rel="stylesheet" />
        <script src="~/js/dashboard/jquery.dataTables.min.js"></script>
        <script src="~/js/dashboard/dataTables.bootstrap.min.js"></script>
        @*<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>*@



        @*<script type="text/javascript" src="~/js/jquery.min.js"></script>*@

        <script>
        var RootUrl = '@Url.Content("~/")';

        $(document).ready(function () {


            //$("dataTables-example").DataTable();

            //$('#dataTables-example').DataTable({
            //    responsive: true
            //});
            // date validation ========================================================================
            var currentYear = (new Date).getFullYear();

            var Range = '2008:' + (currentYear + 1)
            $("#FromDate").datepicker({ yearRange: Range, dateFormat: 'dd/mm/yy', changeMonth: true, changeYear: true, onClose: function (dateText, inst) { $("[id$=auto]").focus(); } });
            var currentDate = new Date();

            $(document).on('keypress', '#FromDate', function (event) {

                event.preventDefault();
                return false;

            });

            $('#FromDate').keydown(function (event)
            { return cancelBackspace(event) });
            function cancelBackspace(event) {
                if (event.keyCode == 8 || event.keyCode == 46) {
                    return false;
                }
            }

            // date validation ========================================================================





            $('#Place').change(function (e) {
                $('#PLACE_NAME').val($("#Place option:selected").text());
            });

            $('#SHIFT_TYPE').change(function (e) {

                $('#SHIFTName').val($("#SHIFT_TYPE option:selected").text());

            });


            $('#btn_submit1').click(function (e) {




                if ($('#FromDate').val() == '') {
                    $("#errFromDate").css("display", "block");
                    $('#errFromDate').focus();
                    return false;
                }
                else {
                    $("#errFromDate").css("display", "none");
                }



                if ($('option:selected', $('#Place')).index() == 0) {
                    $("#errPlace").css("display", "block");
                    $('#errPlace').focus();
                    return false;
                }
                else {
                    $("#errPlace").css("display", "none");
                }


                if ($('option:selected', $('#SHIFT_TYPE')).index() == 0) {
                    $("#errSHIFT_TYPE").css("display", "block");
                    $('#errSHIFT_TYPE').focus();
                    return false;
                }
                else {
                    $("#errDuration").css("display", "none");
                }



            });

        });


        </script>





