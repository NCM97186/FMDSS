@{
    ViewBag.Title = "InvestigationDeatils";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model FMDSS.Models.Encroachment.ViewModel.EncroachInvestigationView
<script src="~/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<div id="page-wrapper-inn">
    <div class="col-lg-12 pad">
        <h1 class="page-header">Investigation Details Form</h1>
    </div>
    <div class="row">
        @if (TempData["InvestigationMsg"] != null)
        {
            <script type="text/javascript" language="javascript">
                alert('@TempData["InvestigationMsg"]');
            </script>
        }
        <div class="col-lg-12">
            <div class="panel panel-default">
                @using (Html.BeginForm("Submit", "ViewUpdateEncroachment", FormMethod.Post, new { data_behavior = "confirm", enctype = "multipart/form-data", id = "IdFor" }))
                {
                    @Html.HiddenFor(x => x.EN_Code, new { @id = "EN_Code", @name = "EN_Code", @Value = @TempData["EnchCode"] })
                    @Html.HiddenFor(x => x.IsDocumentUpload, new { @id = "IsDocumentUpload", @value = Model.IsDocumentUpload })

                    @Html.HiddenFor(x => x.IsMAPFilesDocumentUpload, new { @id = "IsMAPFilesDocumentUpload", @value = Model.IsMAPFilesDocumentUpload })
                    @Html.HiddenFor(x => x.IsJamabandiFilesDocumentUpload, new { @id = "IsJamabandiFilesDocumentUpload", @value = Model.IsJamabandiFilesDocumentUpload })
                    @Html.HiddenFor(x => x.IsNotificationFilesDocumentUpload, new { @id = "IsNotificationFilesDocumentUpload", @value = Model.IsNotificationFilesDocumentUpload })
                    @Html.HiddenFor(x => x.IsPanchnamaFilesDocumentUpload, new { @id = "IsPanchnamaFilesDocumentUpload", @value = Model.IsPanchnamaFilesDocumentUpload })
                    @Html.HiddenFor(x => x.IsNazarBandiFilesDocumentUpload, new { @id = "IsNazarBandiFilesDocumentUpload", @value = Model.IsNazarBandiFilesDocumentUpload })

                    //   @Html.HiddenFor(x => x.AadharOrBhamasha, new { @id = "IsAadharOrBhamasha", @value = Model.AadharOrBhamasha })

                    <div class="panel-body">

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Year: <span class="mandatory">*</span></label>
                                @Html.DropDownListFor(x => x.Year, new List<SelectListItem>
                                    {
                                        new SelectListItem { Text = "--Select--", Value = ""},
                                         new SelectListItem { Text = "2018", Value = "2018"},
                                        new SelectListItem { Text = "2017", Value = "2017"},
                                        new SelectListItem { Text = "2016", Value = "2016"},
                                        new SelectListItem { Text = "2015", Value = "2015"},
                                        new SelectListItem { Text = "2014", Value = "2014"},
                                        new SelectListItem { Text = "2013", Value = "2013"},
                                        new SelectListItem { Text = "2012", Value = "2012"},
                                        new SelectListItem { Text = "2011", Value = "2011"},
                                        new SelectListItem { Text = "2010", Value = "2010"},
                                    }, new { id = "Year", name = "Year", @class = "form-control" })

                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.Year)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Type of Forest: <span class="mandatory">*</span></label>
                                @Html.DropDownListFor(x => x.TypeofLand, new List<SelectListItem>
                                    {
                                        new SelectListItem { Text = "--Select--", Value = ""},
                                        new SelectListItem { Text = " Reserve Forest", Value = " Reserve Forest"},
                                        new SelectListItem { Text = " Protected Forest", Value = " Protected Forest"},
                                        new SelectListItem { Text = "Unclustered Forest", Value = "Unclustered Forest"},
                                    }, new { id = "TypeofLand", name = "TypeofLand", @class = "form-control" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.TypeofLand)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Block Name: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.Block_Name, new { @class = "form-control non-zero-num", @id = "Block_Name", name = "Block_Name" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.Block_Name)</div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Total Block Area: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.Total_Area_Block, new { @class = "form-control non-zero-num", @id = "Total_Area_Block", name = "Total_Area_Block" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.Total_Area_Block)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Encroch Area From GIS (hect): <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.TotalArea, new { @class = "form-control non-zero-num", @id = "TotalArea", name = "TotalArea" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.TotalArea)</div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>khasra No.: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.khasraNo, new { @class = "form-control", @id = "khasraNo", name = "khasraNo" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.khasraNo)</div>
                            </div>
                        </div>


                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Rate of Lagan: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.TaxPerHact, new { @class = "form-control non-zero-num", @id = "TaxPerHact", name = "TaxPerHact" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.TaxPerHact)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Compartment No: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.CompartmentNo, new { @class = "form-control", @id = "CompartmentNo", name = "CompartmentNo" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.CompartmentNo)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Information Gathered By: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.InformationGatheredBy, new { @class = "form-control", @id = "InformationGatheredBy", name = "InformationGatheredBy" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.InformationGatheredBy)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Information Approved By: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.InformationApprovedBy, new { @class = "form-control", @id = "InformationApprovedBy", name = "InformationApprovedBy" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.InformationApprovedBy)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Notification No: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.NotificationNo, new { @class = "form-control", @id = "NotificationNo", name = "NotificationNo" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.NotificationNo)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Notification Date: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.NotificationDate, new { id = "NotificationDate", name = "NotificationDate", @class = "form-control datefield" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.NotificationDate)</div>
                            </div>
                        </div>




                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>MAP Upload: <span id="DocUpload1" style="display:none"><a href="@Url.Action("GetFile", "ViewUpdateEncroachment", new { EN_Code = @Model.EN_Code,FileType= "MAPFiles" })">Download</a></span></label>
                                @Html.TextBoxFor(x => x.MAPFiles, new { @class = "form-control", @id = "MAPFiles", name = "MAPFiles", type = "file" })
                                <div id="errDocMAP" class="alert-danger1">@Html.ValidationMessageFor(x => x.MAPFiles)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Jamabandi Upload: <span id="DocUpload2" style="display:none"><a href="@Url.Action("GetFile", "ViewUpdateEncroachment", new { EN_Code = @Model.EN_Code,FileType= "JamabandiFiles" })">Download</a></span></label>
                                @Html.TextBoxFor(x => x.JamabandiFiles, new { @class = "form-control", @id = "JamabandiFiles", name = "JamabandiFiles", type = "file" })
                                <div id="errDocJamabandi" class="alert-danger1">@Html.ValidationMessageFor(x => x.JamabandiFiles)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Notification Upload: <span id="DocUpload3" style="display:none"><a href="@Url.Action("GetFile", "ViewUpdateEncroachment", new { EN_Code = @Model.EN_Code,FileType= "NotificationFiles" })">Download</a></span></label>
                                @Html.TextBoxFor(x => x.NotificationFiles, new { @class = "form-control", @id = "NotificationFiles", name = "NotificationFiles", type = "file" })
                                <div id="errDocNotification" class="alert-danger1">@Html.ValidationMessageFor(x => x.NotificationFiles)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Panchnama Upload: <span id="DocUpload4" style="display:none"><a href="@Url.Action("GetFile", "ViewUpdateEncroachment", new { EN_Code = @Model.EN_Code,FileType= "PanchnamaFiles" })">Download</a></span></label>
                                @Html.TextBoxFor(x => x.PanchnamaFiles, new { @class = "form-control", @id = "PanchnamaFiles", name = "PanchnamaFiles", type = "file" })
                                <div id="errDocPanchnama" class="alert-danger1">@Html.ValidationMessageFor(x => x.PanchnamaFiles)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>  Nazri Naksha Upload: <span id="DocUpload5" style="display:none"><a href="@Url.Action("GetFile", "ViewUpdateEncroachment", new { EN_Code = @Model.EN_Code,FileType= "NazarBandiFiles" })">Download</a></span></label>
                                @Html.TextBoxFor(x => x.NazarBandiFiles, new { @class = "form-control", @id = "NazarBandiFiles", name = "NazarBandiFiles", type = "file" })
                                <div id="errDocNazarBandi" class="alert-danger1">@Html.ValidationMessageFor(x => x.NazarBandiFiles)</div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Document Upload: <span id="DocUpload" style="display:none"><a href="@Url.Action("GetFile", "ViewUpdateEncroachment", new { EN_Code = @Model.EN_Code,FileType="Files" })">Download</a></span></label>
                                @Html.TextBoxFor(x => x.Files, new { @class = "form-control", @id = "Files", name = "Files", type = "file" })
                                <div id="errDoc" class="alert-danger1">@Html.ValidationMessageFor(x => x.Files)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Actual Encroached Area(hect): <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.Encroachment_Area, new { @class = "form-control non-zero-num", @id = "Encroachment_Area", name = "Encroachment_Area" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.Encroachment_Area)</div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Encroachment Paidawar: <span class="mandatory">*</span></label>
                                @Html.TextBoxFor(x => x.Encroachment_Yield, new { @class = "form-control non-zero-num", @id = "Encroachment_Yield", name = "Encroachment_Yield" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.Encroachment_Yield)</div>
                            </div>
                        </div>
                        @*<div class="col-lg-6">
                                <div class="form-group">
                                    <label>Tax: <span class="mandatory">*</span></label>
                                    @Html.TextBoxFor(x => x.Tax, new { @class = "form-control non-zero-num", @id = "Tax", name = "Tax" })
                                    <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.Tax)</div>
                                </div>
                            </div>*@


                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Remarks: </label>
                                @Html.TextAreaFor(x => x.Remarks, new { @class = "form-control", @id = "Remarks", name = "Remarks", rows = "5", cols = "4", maxlength = "500" })
                                <div id="errJFMC" class="alert-danger1">@Html.ValidationMessageFor(x => x.Remarks)</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12 pad">
                        <h6 class="page-header" style="margin-left:25px;font-size:18px;">Encroachments Details:</h6>
                    </div>
                    if (TempData["ErrorMsg"] != null)
                    {
                        <div class="alert alert-danger1"><i class="fa fa-thumbs-o-up fa-fw"></i>@TempData["ErrorMsg"]</div>
                    }
                    <div class="panel-body">
                        @*@Html.Partial("~/Views/Encroachment/EncroachmentDetails.cshtml")*@
                        @{Html.RenderAction("EncroachmentDetails", "ViewUpdateEncroachment");}

                        <div class="col-lg-12"></div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Add:</label><br>
                                <button type="button" class="btn btn-success" title="Save" name="Command" value="Submit" id="btnAddEncroach" style="width:auto">
                                    <i class="fa fa-plus"></i> Add Encroachment
                                </button>

                            </div>
                        </div>
                        <div class="dataTable_wrapper table-responsive scroll-x simplebar horizontal">
                            <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                                <thead>
                                    <tr role="row">
                                        <th style="display:none">
                                            RowId
                                        </th>
                                        <th>
                                            ID Type
                                        </th>
                                        <th>
                                            Name
                                        </th>
                                        <th>
                                            Father name
                                        </th>
                                        <th>
                                            Address
                                        </th>
                                        @*<th>
                                                Aadhar/Bhamashah
                                            </th>

                                            <th>
                                                Aadhar/Bhamashah Details
                                            </th>*@
                                        <th>
                                            Action
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tblDetails"></tbody>
                            </table>

                        </div>
                    </div>
                    <div class="btn-padd">
                        <div id="btn" class="col-lg-12">
                            <button type="Submit" class="btn btn-success confirm-toggle" name="Command" value="submit" id="btnInvestigation">
                                <i class="fa fa-check"></i> Submit
                            </button>
                            <button type="reset" class="btn btn-warning" onclick="reload(); return false;">
                                <i class="fa fa-circle-o-notch fa-fw"></i> Reset
                            </button>
                            <button type="submit" name="Command" value="Cancel" class="btn btn-danger" onclick="reload(); return false;">
                                <i class="fa fa-times fa-fw"></i> Cancel
                            </button>

                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<!--Bhamasha Model-->

<div class="modal fade in" id="myModalDashboard" tabindex="-1" role="dialog" aria-hidden="false">
    <div class="modal-dialog mdw">
        <div class="modal-content" style="height:500px;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title" id="myModalLabel">
                    View Member(s) Detail
                </h4>
            </div>
            <div id="divmember">
                <table class="table table-striped table-bordered table-hover">
                    <tbody id="tblMemberDetails"></tbody>
                </table>
            </div>
            <!-- /.modal-body -->
            <div class="modal-footer" id="fot-f">
                <button name="button" class="btn btn-danger" type="submit" value="Cancel" data-dismiss="modal" style="width: auto">
                    <i class="fa fa-times fa-fw"></i> Close
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


<!--End Bhamasha Model-->

<script src="~/Scripts/BhamashaServices.js"></script>
<script>
    var RootURl = '@Url.Content("~/")';
    $("#GetDetails").click(function () {
        var AadharOrBhamashaNumber = $("#Encroacher_Bhamashah").val();
        $.ajax({
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            data: { BhamashaId: AadharOrBhamashaNumber },
            url: RootURl + "TransitPermitCitizen/GetBhamashaData",
            success: function (data) {

                if (typeof (data.errorcode) === 'undefined') {
                    $('#myModalDashboard').modal('show');
                    $('#tblMemberDetails').html(data);
                    console.log(data);
                }
                else {
                    alert(data.errorDescription);
                }
            },
            error: function (ex) { alert(ex); }
        });
    });
</script>
<script>
    var RootURl = '@Url.Content("~/")';
</script>
<script type="text/javascript">
    $(function () {
        $('footer.foot-inn').hide();
    })
</script>
<script>

    $(function (e) {

        $(".datefield").datepicker({ maxDate: new Date(), dateFormat: 'dd/mm/yy', changeYear: true, onClose: function (dateText, inst) { $("[id$=auto]").focus(); } });
        //$(".non-zero-num").val($(this).val() == 0 ? '' : $(this).val());
        if ($(".non-zero-num").val() == "0") {
            $(".non-zero-num").val('');
        }
        if ($('#IsDocumentUpload').val() == 'Y') {
            $('#DocUpload').show();
        }
        else {
            $('#DocUpload').hide();
        }
        if ($('#IsMAPFilesDocumentUpload').val() == 'Y') {
            $('#DocUpload1').show();
        }
        else {
            $('#DocUpload1').hide();
        }
        if ($('#IsJamabandiFilesDocumentUpload').val() == 'Y') {
            $('#DocUpload2').show();
        }
        else {
            $('#DocUpload2').hide();
        }

        if ($('#IsNotificationFilesDocumentUpload').val() == 'Y') {
            $('#DocUpload3').show();
        }
        else {
            $('#DocUpload3').hide();
        }

        if ($('#IsPanchnamaFilesDocumentUpload').val() == 'Y') {
            $('#DocUpload4').show();
        }
        else {
            $('#DocUpload4').hide();
        }

        if ($('#IsNazarBandiFilesDocumentUpload').val() == 'Y') {
            $('#DocUpload5').show();
        }
        else {
            $('#DocUpload5').hide();
        }

        //if ($('#AadharOrBhamasha').val() == 'Aadhar') {
        //    $('#AadharOrBhamasha').val('Aadhar');
        //    $('.Bhamashah').hide();
        //    $('.Aadhar').show();
        //    $('#Encroacher_Bhamashah').val('');

        //}
        //if ($('#AadharOrBhamasha').val() == 'Bhamasha') {
        //    $('#AadharOrBhamasha').val('Bhamasha')
        //    $('.Aadhar').hide();
        //    $('.Bhamashah').show();
        //    $('#Encroacher_Aadhar').val('');

        //}

        $('#AadharOrBhamasha').change(function (e) {
            if ($('#AadharOrBhamasha').val() == 'Aadhar') {
                $('.Bhamashah').hide();
                $('.Aadhar').show();
                $('#Encroacher_Aadhar').val('');
                $('#Encroacher_Bhamashah').val('');
            }
            if ($('#AadharOrBhamasha').val() == 'Bhamasha') {
                $('.Aadhar').hide();
                $('.Bhamashah').show();
                $('#Encroacher_Aadhar').val('');
                $('#Encroacher_Bhamashah').val('');
            }
        });

        $.ajax({
            type: 'POST',
            url: RootURl + 'ViewUpdateEncroachment/GetEncroacherDetails',
            data: { EnchCode: $('#EN_Code').val() },
            dataType: 'json',
            success: function (data) {
                $.each(data, function (i, items) {
                    //    var id = "'" + items.rowid + "'";

                    //    //var rowdata = "<tr><td style=display:none;>" + items.rowid + "</td><td>" + items.Encroacher_Name + "</td><td>" + items.Encroacher_Address + "</td><td>" + items.AadharOrBhamasha + "</td><td>" + AadharOrBhamashaDetails + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' style=cursor:pointer onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    //    var rowdata = "<tr><td style=display:none;>" + items.rowid + "</td><td>" + items.Encroacher_Name + "</td><td>" + items.Encroacher_Address + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' style=cursor:pointer onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    //    $("#tblDetails").append(rowdata);
                    //});
                    //$('#Encroacher_Name,#Encroacher_Address,#Encroacher_Aadhar,#Encroacher_Bhamashah').val('')
                    //$('#AadharOrBhamasha').val(0);
                    var id = "'" + items.rowid + "'";
                    var types = "";
                    if (items.AadharOrBhamasha == "Aadhar") { types = items.AadharOrBhamasha + '/' + items.Encroacher_Aadhar }
                    else if (items.AadharOrBhamasha == "Bhamasha") { types = items.AadharOrBhamasha + '/' + items.Encroacher_Bhamashah }
                    else { types = "" }
                    //var rowdata = "<tr><td style=display:none;>" + data.rowid + "</td><td>" + data.Encroacher_Name + "</td><td>" + data.Encroacher_Address + "</td><td>" + data.AadharOrBhamasha + "</td><td>" + AadharOrBhamashaDetails + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' style=cursor:pointer onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    var rowdata = "<tr><td style=display:none;>" + items.rowid + "</td><td>" + types + "</td><td>" + items.Encroacher_Name + "</td><td>" + items.Encroacher_FatherName + "</td><td>" + items.Encroacher_Address + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' style=cursor:pointer onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    $("#tblDetails").append(rowdata);
                    $('#Encroacher_Name,#Encroacher_Address').val('');
                });
            }
        });

        $("#Files").change(function () {
            try {
                var file = getNameFromPath($(this).val());
                if (file != null) {
                    var extension = file.substr((file.lastIndexOf('.') + 1));
                    switch (extension) {
                        case 'jpg':
                        case 'png':
                        case 'gif':
                        case 'pdf':
                        case 'xls':
                        case 'xlsx':
                        case 'docx':
                        case 'doc':
                        case 'pptx':
                        case 'ppt':
                        case 'txt':
                        case 'shp':
                        case 'csv':
                        case 'JPG':
                        case 'PNG':
                        case 'GIF':
                        case 'PDF':
                        case 'XLS':
                        case 'XLSX':
                        case 'DOCX':
                        case 'DOC':
                        case 'PPTX':
                        case 'PPT':
                        case 'TXT':
                        case 'SHP':
                        case 'CSV':
                            flag = true;
                            break;
                        default:
                            flag = false;
                    }
                }
                if (flag == false) {
                    $("#errDoc").text("You can only upload only jpg,png,gif,pdf,xls,doc extension file");
                    $("#Files").val('');
                    return false;
                }
                else {
                    var size = GetFileSize('Files');
                    if (size > 2) {
                        $("#errDoc").text("You can upload file up to 2 MB");
                        $("#Files").val('');
                    }
                    else {
                        $("#errDoc").text("");
                    }
                }
            }
            catch (err) { alert(err.message); }
        });

        $("#MAPFiles").change(function () {
            try {
                var file = getNameFromPath($(this).val());
                if (file != null) {
                    var extension = file.substr((file.lastIndexOf('.') + 1));
                    switch (extension) {
                        case 'jpg':
                        case 'png':
                        case 'gif':
                        case 'pdf':
                        case 'xls':
                        case 'xlsx':
                        case 'docx':
                        case 'doc':
                        case 'pptx':
                        case 'ppt':
                        case 'txt':
                        case 'shp':
                        case 'csv':
                        case 'JPG':
                        case 'PNG':
                        case 'GIF':
                        case 'PDF':
                        case 'XLS':
                        case 'XLSX':
                        case 'DOCX':
                        case 'DOC':
                        case 'PPTX':
                        case 'PPT':
                        case 'TXT':
                        case 'SHP':
                        case 'CSV':
                            flag = true;
                            break;
                        default:
                            flag = false;
                    }
                }
                if (flag == false) {
                    $("#errDocMAP").text("You can only upload only jpg,png,gif,pdf,xls,doc extension file");
                    $("#MAPFiles").val('');
                    return false;
                }
                else {
                    var size = GetFileSize('MAPFiles');
                    if (size > 50) {
                        $("#errDocMAP").text("You can upload file up to 50 MB");
                        $("#MAPFiles").val('');
                    }
                    else {
                        $("#errDocMAP").text("");
                    }
                }
            }
            catch (err) { alert(err.message); }
        });

        $("#JamabandiFiles").change(function () {
            try {
                var file = getNameFromPath($(this).val());
                if (file != null) {
                    var extension = file.substr((file.lastIndexOf('.') + 1));
                    switch (extension) {
                        case 'jpg':
                        case 'png':
                        case 'gif':
                        case 'pdf':
                        case 'xls':
                        case 'xlsx':
                        case 'docx':
                        case 'doc':
                        case 'pptx':
                        case 'ppt':
                        case 'txt':
                        case 'shp':
                        case 'csv':
                        case 'JPG':
                        case 'PNG':
                        case 'GIF':
                        case 'PDF':
                        case 'XLS':
                        case 'XLSX':
                        case 'DOCX':
                        case 'DOC':
                        case 'PPTX':
                        case 'PPT':
                        case 'TXT':
                        case 'SHP':
                        case 'CSV':
                            flag = true;
                            break;
                        default:
                            flag = false;
                    }
                }
                if (flag == false) {
                    $("#errDocJamabandi").text("You can only upload only jpg,png,gif,pdf,xls,doc extension file");
                    $("#JamabandiFiles").val('');
                    return false;
                }
                else {
                    var size = GetFileSize('Files');
                    if (size > 2) {
                        $("#errDocJamabandi").text("You can upload file up to 2 MB");
                        $("#JamabandiFiles").val('');
                    }
                    else {
                        $("#errDocJamabandi").text("");
                    }
                }
            }
            catch (err) { alert(err.message); }
        });

        $("#NotificationFiles").change(function () {
            try {
                var file = getNameFromPath($(this).val());
                if (file != null) {
                    var extension = file.substr((file.lastIndexOf('.') + 1));
                    switch (extension) {
                        case 'jpg':
                        case 'png':
                        case 'gif':
                        case 'pdf':
                        case 'xls':
                        case 'xlsx':
                        case 'docx':
                        case 'doc':
                        case 'pptx':
                        case 'ppt':
                        case 'txt':
                        case 'shp':
                        case 'csv':
                        case 'JPG':
                        case 'PNG':
                        case 'GIF':
                        case 'PDF':
                        case 'XLS':
                        case 'XLSX':
                        case 'DOCX':
                        case 'DOC':
                        case 'PPTX':
                        case 'PPT':
                        case 'TXT':
                        case 'SHP':
                        case 'CSV':
                            flag = true;
                            break;
                        default:
                            flag = false;
                    }
                }
                if (flag == false) {
                    $("#errDocNotification").text("You can only upload only jpg,png,gif,pdf,xls,doc extension file");
                    $("#NotificationFiles").val('');
                    return false;
                }
                else {
                    var size = GetFileSize('Files');
                    if (size > 2) {
                        $("#errDocNotification").text("You can upload file up to 2 MB");
                        $("#NotificationFiles").val('');
                    }
                    else {
                        $("#errDocNotification").text("");
                    }
                }
            }
            catch (err) { alert(err.message); }
        });

        $("#PanchnamaFiles").change(function () {
            try {
                var file = getNameFromPath($(this).val());
                if (file != null) {
                    var extension = file.substr((file.lastIndexOf('.') + 1));
                    switch (extension) {
                        case 'jpg':
                        case 'png':
                        case 'gif':
                        case 'pdf':
                        case 'xls':
                        case 'xlsx':
                        case 'docx':
                        case 'doc':
                        case 'pptx':
                        case 'ppt':
                        case 'txt':
                        case 'shp':
                        case 'csv':
                        case 'JPG':
                        case 'PNG':
                        case 'GIF':
                        case 'PDF':
                        case 'XLS':
                        case 'XLSX':
                        case 'DOCX':
                        case 'DOC':
                        case 'PPTX':
                        case 'PPT':
                        case 'TXT':
                        case 'SHP':
                        case 'CSV':
                            flag = true;
                            break;
                        default:
                            flag = false;
                    }
                }
                if (flag == false) {
                    $("#errDocPanchnama").text("You can only upload only jpg,png,gif,pdf,xls,doc extension file");
                    $("#PanchnamaFiles").val('');
                    return false;
                }
                else {
                    var size = GetFileSize('Files');
                    if (size > 2) {
                        $("#errDocPanchnama").text("You can upload file up to 2 MB");
                        $("#PanchnamaFiles").val('');
                    }
                    else {
                        $("#errDocPanchnama").text("");
                    }
                }
            }
            catch (err) { alert(err.message); }
        });

        $("#NazarBandiFiles").change(function () {
            try {
                var file = getNameFromPath($(this).val());
                if (file != null) {
                    var extension = file.substr((file.lastIndexOf('.') + 1));
                    switch (extension) {
                        case 'jpg':
                        case 'png':
                        case 'gif':
                        case 'pdf':
                        case 'xls':
                        case 'xlsx':
                        case 'docx':
                        case 'doc':
                        case 'pptx':
                        case 'ppt':
                        case 'txt':
                        case 'shp':
                        case 'csv':
                        case 'JPG':
                        case 'PNG':
                        case 'GIF':
                        case 'PDF':
                        case 'XLS':
                        case 'XLSX':
                        case 'DOCX':
                        case 'DOC':
                        case 'PPTX':
                        case 'PPT':
                        case 'TXT':
                        case 'SHP':
                        case 'CSV':
                            flag = true;
                            break;
                        default:
                            flag = false;
                    }
                }
                if (flag == false) {
                    $("#errDocNazarBandi").text("You can only upload only jpg,png,gif,pdf,xls,doc extension file");
                    $("#NazarBandiFiles").val('');
                    return false;
                }
                else {
                    var size = GetFileSize('Files');
                    if (size > 2) {
                        $("#errDocNazarBandi").text("You can upload file up to 2 MB");
                        $("#NazarBandiFiles").val('');
                    }
                    else {
                        $("#errDocNazarBandi").text("");
                    }
                }
            }
            catch (err) { alert(err.message); }
        });

        $('#btnAddEncroach').click(function () {


            if ($('option:selected', $('#AadharOrBhamasha')).index() == 0) {
                $('#AadharOrBhamasha').focus();
                return false;
            }
            if ($('#AadharOrBhamasha').val() == 'Aadhar' && $('#Encroacher_Aadhar').val() == '') {
                $('.Bhamashah').hide();
                $('.Aadhar').show();
                $('#Encroacher_Aadhar').focus();
                return false;
            }
            if ($('#AadharOrBhamasha').val() == 'Bhamasha' && $('#Encroacher_Bhamashah').val() == '') {
                $('.Aadhar').hide();
                $('.Bhamashah').show();
                $('#Encroacher_Bhamashah').focus();
                return false;
            }
            if ($('#Encroacher_Name').val() == '') {
                $('#Encroacher_Name').focus();
                return false;
            }
            if ($('#Encroacher_FatherName').val() == '') {
                $('#Encroacher_FatherName').focus();
                return false;
            }

            if ($('#Encroacher_Address').val() == '') {
                $('#Encroacher_Address').focus();
                return false;
            }


            //else {
            $.ajax({
                type: 'POST',
                url: RootURl + 'ViewUpdateEncroachment/AddEncroacherDetails',
                //data: { Encroacher_Name: $('#Encroacher_Name').val(), Encroacher_Address: $('#Encroacher_Address').val(), AadharOrBhamasha: $('#AadharOrBhamasha').val(), Encroacher_Aadhar: $('#Encroacher_Aadhar').val(), Encroacher_Bhamashah: $('#Encroacher_Bhamashah').val() },
                data: { Encroacher_Name: $('#Encroacher_Name').val(), Encroacher_FatherName: $('#Encroacher_FatherName').val(), Encroacher_Address: $('#Encroacher_Address').val(), AadharOrBhamasha: $('#AadharOrBhamasha').val(), Encroacher_Aadhar: $('#Encroacher_Aadhar').val(), Encroacher_Bhamashah: $('#Encroacher_Bhamashah').val() },
                dataType: 'json',
                success: function (data) {

                    //var AadharOrBhamashaDetails;
                    //if (data.AadharOrBhamasha == 'Aadhar') {

                    //    AadharOrBhamashaDetails = data.Encroacher_Aadhar;
                    //}
                    //if (data.AadharOrBhamasha == 'Bhamasha') {

                    //    AadharOrBhamashaDetails = data.Encroacher_Bhamashah;
                    //}

                    var id = "'" + data.rowid + "'";
                    var types = "";
                    alert('Success');
                    if (data.AadharOrBhamasha == "Aadhar") { types = data.AadharOrBhamasha + '/' + data.Encroacher_Aadhar }
                    else if (data.AadharOrBhamasha == "Bhamasha") { types = data.AadharOrBhamasha + '/' + data.Encroacher_Bhamashah }
                    else { types = "" }

                    //var rowdata = "<tr><td style=display:none;>" + data.rowid + "</td><td>" + data.Encroacher_Name + "</td><td>" + data.Encroacher_Address + "</td><td>" + data.AadharOrBhamasha + "</td><td>" + AadharOrBhamashaDetails + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' style=cursor:pointer onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    var rowdata = "<tr><td style=display:none;>" + data.rowid + "</td><td>" + types + "</td><td>" + data.Encroacher_Name + "</td><td>" + data.Encroacher_FatherName + "</td><td>" + data.Encroacher_Address + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' style=cursor:pointer onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    alert('Success: ' + rowdata);
                    console.log(rowdata);
                    $("#tblDetails").append(rowdata);
                    $('#Encroacher_Name,#Encroacher_Address,#Encroacher_Bhamashah,#Encroacher_Aadhar,#Encroacher_FatherName').val('');
                }
            });
            //}

        });

        //$('#btnInvestigation').click(function () {

        //    if ($('#AadharOrBhamasha').val() == '') {
        //        $('#AadharOrBhamasha').focus();
        //        return false;
        //    }
        //    if ($('#AadharOrBhamasha').val() == 'Aadhar' && $('#Encroacher_Aadhar').val() == '') {
        //        $('.Bhamashah').hide();
        //        $('.Aadhar').show();
        //        $('#Encroacher_Aadhar').focus();
        //        $('#errAadhar').text('Enter aadhar number');
        //        return false;
        //    }
        //    else {
        //        $('#errAadhar').text('');
        //    }
        //    if ($('#AadharOrBhamasha').val() == 'Bhamasha' && $('#Encroacher_Bhamashah').val() == '') {
        //        $('.Aadhar').hide();
        //        $('.Bhamashah').show();
        //        $('#Encroacher_Bhamashah').focus();
        //        $('#errBhama').text('Enter bhamasha number');
        //        return false;
        //    }
        //    else {
        //        $('#errAadhar').text('');
        //    }

        //});


    });

    function DeleteEncroachment(ID) {
        $("#tblDetails").empty();
        $.ajax({
            type: 'POST',
            url: RootURl + 'Encroachment/DeleteEncroachment',
            dataType: 'json',
            data: { Id: ID },
            success: function (data) {
                $.each(data, function (i, items) {


                    //var AadharOrBhamashaDetails;
                    //if (items.AadharOrBhamasha == 'Aadhar') {

                    //    AadharOrBhamashaDetails = items.Encroacher_Aadhar;
                    //}
                    //if (items.AadharOrBhamasha == 'Bhamasha') {

                    //    AadharOrBhamashaDetails = items.Encroacher_Bhamashah;
                    //}

                    //var id = "'" + items.rowid + "'";
                    //var count = 1;
                    //count = count + i;
                    ////var bardata = "<tr class='" + items.rowid + "'><td>" + items.Encroacher_Name + "</td><td>" + items.Encroacher_Address + "</td><td>" + items.AadharOrBhamasha + "</td><td>" + AadharOrBhamashaDetails + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    //var bardata = "<tr class='" + items.rowid + "'><td>" + items.Encroacher_Name + "</td><td>" + items.Encroacher_Address + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    //$("#tblDetails").append(bardata);

                    var id = "'" + items.rowid + "'";
                    var types = "";
                    if (items.AadharOrBhamasha == "Aadhar") { types = items.AadharOrBhamasha + '/' + items.Encroacher_Aadhar }
                    else if (items.AadharOrBhamasha == "Bhamasha") { types = items.AadharOrBhamasha + '/' + items.Encroacher_Bhamashah }
                    else { types = "" }

                    //var rowdata = "<tr><td style=display:none;>" + data.rowid + "</td><td>" + data.Encroacher_Name + "</td><td>" + data.Encroacher_Address + "</td><td>" + data.AadharOrBhamasha + "</td><td>" + AadharOrBhamashaDetails + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' style=cursor:pointer onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";
                    var rowdata = "<tr><td style=display:none;>" + items.rowid + "</td><td>" + types + "</td><td>" + items.Encroacher_Name + "</td><td>" + items.Encroacher_FatherName + "</td><td>" + items.Encroacher_Address + "</td><td>" + "<button type=button class='btn btn-danger btn-circle' style=cursor:pointer onclick=DeleteEncroachment(" + id + ")><i class='fa fa-times'></i></button>" + "</td></tr>";

                    $("#tblDetails").append(rowdata);
                    $('#Encroacher_Name,#Encroacher_Address').val('');

                });
            },
            traditional: true,
            error: function (data) { console.log(data) }
        });
    }

    function getNameFromPath(strFilepath) {
        try {
            var objRE = new RegExp(/([^\/\\]+)$/);
            var strName = objRE.exec(strFilepath);

            if (strName == null) {
                return null;
            }
            else {
                return strName[0];
            }
        }
        catch (err) { alert(err.message); }
    }

    function GetFileSize(fileid) {
        try {
            var fileSize = 0;
            fileSize = $("#" + fileid)[0].files[0].size //size in kb
            fileSize = fileSize / 1048576; //size in mb
            return fileSize;
        }
        catch (e) {
            //  alert("Error is :" + e);
        }
    }

    function reload() {
        location.reload(true);
    }
</script>